"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5131],{75672:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"project/2025/andrei.anghelea/index","title":"Automatic Plant Watering System","description":"A smart IoT gardening assistant that monitors soil and air conditions to automate watering.","source":"@site/versioned_docs/version-fils_en/project/2025/andrei.anghelea/index.md","sourceDirName":"project/2025/andrei.anghelea","slug":"/project/2025/andrei.anghelea/","permalink":"/docs/fils_en/project/2025/andrei.anghelea/","draft":false,"unlisted":false,"editUrl":"https://www.github.com/upb-pmrust/website/edit/main/website/versioned_docs/version-fils_en/project/2025/andrei.anghelea/index.md","tags":[],"version":"fils_en","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"SentinelGuard","permalink":"/docs/fils_en/project/2025/andrei.andreescu/"},"next":{"title":"Smart Clock","permalink":"/docs/fils_en/project/2025/andrei.dumitrescu04/"}}');var r=i(74848),s=i(28453);const l={},o="Automatic Plant Watering System",d={},a=[{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Component List",id:"component-list",level:3},{value:"Log",id:"log",level:2},{value:"Weeks 3 - 9 and 10 - 16 November",id:"weeks-3---9-and-10---16-november",level:3},{value:"Weeks 24 November - 7 December",id:"weeks-24-november---7-december",level:3},{value:"Weeks 8 - 14 December",id:"weeks-8---14-december",level:3},{value:"Week 15 - 21 December",id:"week-15---21-december",level:3},{value:"Week 12 - 18 January",id:"week-12---18-january",level:3},{value:"Week 19 - 25 January",id:"week-19---25-january",level:3},{value:"Hardware",id:"hardware",level:2},{value:"Schematics",id:"schematics",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"Detailed Software Functionality",id:"detailed-software-functionality",level:2},{value:"Links",id:"links",level:2}];function c(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"automatic-plant-watering-system",children:"Automatic Plant Watering System"})}),"\n",(0,r.jsx)(t.p,{children:"A smart IoT gardening assistant that monitors soil and air conditions to automate watering."}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsx)(t.mdxAdmonitionTitle,{}),(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Author"}),": Andrei Anghelea ",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.strong,{children:"GitHub Project Link"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/UPB-PMRust-Students/project-dm-2025-AngAndrei",children:"https://github.com/UPB-PMRust-Students/project-dm-2025-AngAndrei"})]})]}),"\n",(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"Automatic Plant Watering System"})," is an embedded IoT solution designed to maintain optimal conditions for indoor plants. Built around an ",(0,r.jsx)(t.strong,{children:"STM32 microcontroller"}),", the system intelligently monitors both ",(0,r.jsx)(t.strong,{children:"soil moisture"})," and ",(0,r.jsx)(t.strong,{children:"ambient temperature/humidity"})," to make watering decisions."]}),"\n",(0,r.jsx)(t.p,{children:"The system is designed for flexibility, offering two modes of operation:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Automatic Mode:"})," The system autonomously activates the water pump when soil moisture drops below a critical threshold."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"IoT Remote Mode:"})," Using an ",(0,r.jsx)(t.strong,{children:"ESP8266 Wi-Fi module"}),", the device connects to a mobile app/web dashboard, allowing the user to view real-time environmental data and trigger the watering pump remotely."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsx)(t.p,{children:"I chose this project to address a recurrent, common daily problem for me and my family and friends: keeping house plants alive during busy periods or vacations. Plants often die due to irregular watering, sometimes because owners forget."}),"\n",(0,r.jsx)(t.p,{children:"From an engineering perspective, this project demonstrates:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Hybrid Power Management:"})," Using a dedicated ",(0,r.jsx)(t.strong,{children:"Breadboard Power Supply"})," to drive high-current actuators (pumps) while keeping the microcontroller logic safe."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"IoT Bridge Implementation:"})," Creating a UART-to-Wi-Fi bridge between an ARM Cortex-M4 (STM32) and an ESP8266."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Multi-Sensor Fusion:"})," Combining analog data (soil) and digital protocol data (DHT11) in a real-time Rust application."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(t.mermaid,{value:"graph TD;\n    PS[Power Supply MB102] --\x3e|5V Rail| PUMP[Water Pump];\n    PS --\x3e|3.3V Rail| STM[STM32 Nucleo];\n    PS --\x3e|3.3V Rail| ESP[ESP8266 Wi-Fi];\n    PS --\x3e|3.3V Rail| SENSORS[Sensors];\n\n    STM --\x3e|GPIO Signal| MOS[MOSFET Switch];\n    MOS --\x3e|Power Control| PUMP;\n\n    SOIL[Soil Sensor] --\x3e|Analog Data| STM;\n    DHT[DHT11 Sensor] --\x3e|Digital Data| STM;\n\n    STM <--\x3e|UART TX/RX| ESP;\n    ESP -.->|Wi-Fi| CLOUD((Web Dashboard));"}),"\n",(0,r.jsx)(t.h3,{id:"component-list",children:"Component List"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"STM32 (Controller):"})," Orchestrates the logic, reads sensors, and sends commands."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Sensors:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Soil Sensor:"})," Analog reading of soil water content."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"DHT11:"})," Digital reading of air temperature and humidity."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Actuator:"})," A 5V Submersible Pump controlled by a ",(0,r.jsx)(t.strong,{children:"MOSFET"})," (Low-Side Switch)."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Connectivity:"})," ESP8266 communicating via UART (TX/RX) to send JSON data to the cloud."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,r.jsx)(t.h3,{id:"weeks-3---9-and-10---16-november",children:"Weeks 3 - 9 and 10 - 16 November"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Project Selection:"}),' Researched various embedded project ideas and selected the "Automatic Plant Watering System" due to its practical utility.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Requirements Definition:"})," Decided on the core architecture: using an ",(0,r.jsx)(t.strong,{children:"STM32"})," for control and an ",(0,r.jsx)(t.strong,{children:"ESP8266"})," for Wi-Fi connectivity."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Planning:"})," Created the initial project outline and defined the necessary features (Automatic Mode vs. Remote App Control)."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"weeks-24-november---7-december",children:"Weeks 24 November - 7 December"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Component Selection:"})," Finalized the Bill of Materials (BOM), ensuring compatibility between the 3.3V logic of the STM32 and the 5V requirement of the pump."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Procurement:"})," Ordered the specialized components (Soil Sensor, Submersible Pump, Breadboard Power Supply)."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Inventory:"})," Verified existing components from Arduino starter kits (DHT11, Resistors, Wires) to ensure nothing was missing."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Arrival:"})," Received the ordered parts and performed a visual inspection."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"weeks-8---14-december",children:"Weeks 8 - 14 December"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Hardware Testing:"})," Individually tested the new components:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Verified the ",(0,r.jsx)(t.strong,{children:"Breadboard Power Supply"})," output (5V/3.3V rails)."]}),"\n",(0,r.jsxs)(t.li,{children:["Tested the ",(0,r.jsx)(t.strong,{children:"Submersible Pump"})," functionality directly on power."]}),"\n",(0,r.jsxs)(t.li,{children:["Calibrated the ",(0,r.jsx)(t.strong,{children:"Soil Moisture Sensor"})," (Dry air vs. Water readings)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Integration Tests:"})," Experimented with the MOSFET circuit to switch the pump on/off using a simple signal."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Final Sourcing:"})," The last remaining components arrived, completing the hardware set."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"week-15---21-december",children:"Week 15 - 21 December"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Documentation:"})," Started writing the comprehensive project documentation (Architecture, Hardware, Software sections) on the website."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Core Logic:"})," Began developing the main software logic in ",(0,r.jsx)(t.strong,{children:"Rust"}),", defining the application structure."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"State Machine:"})," Designed the primary state machine (Sleep -> Measure -> Decide -> Report) to serve as the base for the code implementation."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"week-12---18-january",children:"Week 12 - 18 January"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Component Integration:"})," Connected the Soil Moisture Sensor and DHT11 to the STM32 Nucleo board on the breadboard."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Initial Code Testing:"})," Wrote and flashed the initial Rust driver code to verify accurate readings from both sensors via the defmt logger."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Actuator Prep:"})," Soldered male jumper headers onto the Submersible Pump wires to allow for a secure connection to the breadboard."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Bridge Configuration:"}),' Flashed the ESP-01 with the custom "Wi-Fi Manager" firmware to handle ThingSpeak communication.']}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"week-19---25-january",children:"Week 19 - 25 January"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Circuit Completion:"})," Built the MOSFET Low-Side Switch circuit (Transistor + Flyback Diode) to safely interface the 5V Pump with the 3.3V STM32 logic."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Power Rail Setup:"})," Configured the MB102 Power Supply to provide separate 5V (for the pump) and 3.3V (for the STM32/ESP) rails."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Final Polish:"})," Tided up the wiring and finalized the documentation photos."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"hardware",children:"Hardware"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{alt:"Photo Hardware",src:i(82824).A+"",width:"729",height:"768"}),"\n",(0,r.jsx)(t.img,{alt:"Photo Hardware",src:i(17781).A+"",width:"626",height:"768"})]}),"\n",(0,r.jsx)(t.h3,{id:"schematics",children:"Schematics"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Hardware Schematic",src:i(85891).A+"",width:"1024",height:"724"})}),"\n",(0,r.jsx)(t.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Device"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Usage"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Price(Ron)"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"STM32 Board"})," (Nucleo-U545RE-Q)"]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Main Controller"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"128"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/electronica-de-putere-stabilizatoare-liniare/61-sursa-de-alimentare-pentru-breadboard.html",children:"Breadboard Power Supply (MB102)"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Provides stable 5V & 3.3V rails"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"4.69"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/en/wires-with-connectors/896-9v-battery-connector-with-dc-jack.html?srsltid=AfmBOoqBu2WnHuISFJTu4C4pY3SxYivh9p0muAx0wqIuCJrkuwDhYV5S",children:"9V Battery + Jack Clip"})})," (or 12V Adapter)"]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Input power for the Breadboard Supply"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"1.5"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/wireless-wifi/222-modul-wi-fi-esp-01-negru.html?search_query=esp8266+wifi+module&results=12",children:"ESP8266 (ESP-01S)"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Wi-Fi Connectivity (UART)"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"17.49"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/altele/12969-mini-pompa-de-apa-submersibila-5v-cu-usb.html",children:"Mini Submersible Pump (5V)"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Watering Actuator"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/senzori-senzori-de-umiditate/73-senzor-de-umiditate-a-solului.html?search_query=sensor+umiditate&results=8",children:"Soil Sensor v1.2"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Analog Moisture Sensor"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"4"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/senzori-senzori-de-temperatura/4762-modul-senzor-de-temperatura-dht11-cu-led.html?search_query=dht11&results=12",children:"DHT11 Sensor"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Air Temp & Humidity"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/componente-electronice-tranzistoare/11870-tranzistor-mosfet-irlz44n-canal-n-83w-55v-41a.html?search_query=irlz44n+mosfet&results=1",children:"IRLZ44N MOSFET"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Switch for the Pump"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"5"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/kituri/12333-kit-plusivo-microcontroller-starter.html?search_query=starter+kit&results=14",children:"1N4007 Diode"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Flyback Protection (for Pump)"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"0.5"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/kituri/12333-kit-plusivo-microcontroller-starter.html?search_query=starter+kit&results=14",children:"Resistors (10k\u03a9, 1k\u03a9)"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Resistors"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"1"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/prototipare-breadboard-uri/8-breadboard-830-points.html?search_query=breadboard&results=96",children:"Jumper Wires & Breadboard"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Connections"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/piese-imprimante-3d-altele/12925-tub-de-teflon-4x6-mm-pret-per-1-m.html?search_query=tub&results=49",children:"Vinyl Tubing (6mm)"})})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Water transport"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"10"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"software",children:"Software"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Library"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Usage"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"embassy-stm32"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Hardware Abstraction Layer (HAL)"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Controls the ",(0,r.jsx)(t.strong,{children:"ADC"})," (Soil Sensor), ",(0,r.jsx)(t.strong,{children:"GPIO"})," (Pump), and ",(0,r.jsx)(t.strong,{children:"UART"})," (ESP8266)."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"embassy-time"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Async Timer"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Manages non-blocking delays (e.g., watering for exactly 5 seconds)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"dht-sensor"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"DHT11 Driver"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specialized driver to read Air Temperature & Humidity from the DHT11 sensor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"heapless"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Static Data Structures"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:'Used to create fixed-size String buffers for formatting the UART messages ("22,50,4000\\n").'})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"panic-probe"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Panic Handler"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Handles system panics by printing the error location to the debug console."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"detailed-software-functionality",children:"Detailed Software Functionality"}),"\n",(0,r.jsx)(t.p,{children:"The system architecture is divided into:"}),"\n",(0,r.jsx)(t.p,{children:"System Initialization & Configuration"}),"\n",(0,r.jsx)(t.p,{children:"Clock & Peripherals: Configuring the STM32 system clocks and enabling power to necessary GPIO ports.\nADC Setup: Initializing the Analog-to-Digital Converter (ADC1) with 12-bit resolution for precise soil moisture readings."}),"\n",(0,r.jsx)(t.p,{children:"GPIO Configuration:\nRelay/Pump: Configured as Push-Pull Output, initialized to Low (OFF) to prevent accidental flooding during boot.\nDHT11: Configured as Open-Drain Output for single-wire bidirectional communication."}),"\n",(0,r.jsx)(t.p,{children:"Communication (UART): Setting up USART1 (115200 baud) with Direct Memory Access (DMA) channels to send data to the ESP-01 without stalling the processor.\nSafety Delay: A mandatory 2-second stabilization pause at startup to settle power rails before any logic begins."}),"\n",(0,r.jsx)(t.p,{children:'Modular Drivers\nSoil Sensor: Reads raw voltage values mapped to a 0\u20134095 range (where ~4000 represents dry air and less than 2000 represents water).\nDHT11 Protocol: Implements a custom "bit-banging" protocol that handles microsecond-level timing to handshake with the sensor and decode the 40-bit temperature/humidity data stream.'}),"\n",(0,r.jsx)(t.p,{children:"Main Application Loop"}),"\n",(0,r.jsx)(t.p,{children:"Sensor Acquisition Phase:\nPerforms a blocking read of the Soil Moisture Sensor (PA0).\nPerforms an asynchronous query of the DHT11 Sensor (PA4) to fetch Temperature (\xb0C) and Humidity (%)."}),"\n",(0,r.jsx)(t.p,{children:"Telemetry Phase:\nFormats sensor data into a CSV string (TEMP,HUM,SOIL\\n).\nTransmits the string via UART/DMA to the ESP-01 module for Wi-Fi upload (ThingSpeak)."}),"\n",(0,r.jsx)(t.p,{children:'Control Logic (The Decision Engine):\nThreshold Check: Compares the Soil Moisture value against the defined "Dry Threshold" (3000).\nActivation: If the soil is dry (>3000), the system asserts the Relay Pin (PA5) High.\nTiming Control: The pump runs for a strictly enforced 3-second window using Timer::after_secs(3).\nDeactivation: The Relay is forced Low immediately after the window closes.'}),"\n",(0,r.jsx)(t.p,{children:"Sleep Cycle:\nThe system enters a low-power async wait state for 15 seconds before repeating the loop, allowing the soil water levels to settle."}),"\n",(0,r.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://docs.rust-embedded.org/book/",children:"The Embedded Rust Book"})," - Core concepts for Rust on microcontrollers."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://embassy.dev/",children:"Embassy Framework Documentation"})," - The primary framework used for the async logic."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://docs.espressif.com/projects/esp-at/en/latest/AT_Command_Set/index.html",children:"ESP8266 AT Command Set"})," - Reference for commanding the Wi-Fi module via UART."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://crates.io/crates/dht-sensor",children:"DHT11 Rust Driver (dht-sensor)"})," - Documentation for the specific sensor library."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},17781:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Picture1-3b2946d8f8cdb9a0ebcb25220b63b53a.webp"},82824:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Picture2-4e14007009cf14fcdf75eaf39994202c.webp"},85891:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/schematic-0d588d1cb1e4eb219f21a27910ad24df.svg"},28453:(e,t,i)=>{i.d(t,{R:()=>l,x:()=>o});var n=i(96540);const r={},s=n.createContext(r);function l(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);