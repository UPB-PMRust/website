"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1031],{30654:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>x,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"project/2025/delia_elena.udrea/index","title":"Polyphonic Keyboard Synthesizer","description":"Embedded Rust on STM32","source":"@site/versioned_docs/version-fils_en/project/2025/delia_elena.udrea/index.md","sourceDirName":"project/2025/delia_elena.udrea","slug":"/project/2025/delia_elena.udrea/","permalink":"/docs/fils_en/project/2025/delia_elena.udrea/","draft":false,"unlisted":false,"editUrl":"https://www.github.com/upb-pmrust/website/edit/main/website/versioned_docs/version-fils_en/project/2025/delia_elena.udrea/index.md","tags":[],"version":"fils_en","frontMatter":{"sidebar_label":"Polyphonic Keyboard"},"sidebar":"tutorialSidebar","previous":{"title":"Music Player","permalink":"/docs/fils_en/project/2025/delia_alexa.dragan/"},"next":{"title":"Rogue Rust","permalink":"/docs/fils_en/project/2025/denis_iulian.pavel/"}}');var n=s(74848),i=s(28453);const r={sidebar_label:"Polyphonic Keyboard"},a="Polyphonic Keyboard Synthesizer",d={},c=[{value:"Embedded Rust on STM32",id:"embedded-rust-on-stm32",level:3},{value:"Description",id:"description",level:2},{value:"Functionality",id:"functionality",level:3},{value:"Motivation",id:"motivation",level:2},{value:"2.1 Project Motivation",id:"21-project-motivation",level:3},{value:"2.2 SWOT Analysis",id:"22-swot-analysis",level:3},{value:"Architecture",id:"architecture",level:2},{value:"2.1 Hardware Architecture",id:"21-hardware-architecture",level:3},{value:"2.2 Software Architecture",id:"22-software-architecture",level:3},{value:"Concurrency &amp; Priority Model",id:"concurrency--priority-model",level:4},{value:"Hardware Binding",id:"hardware-binding",level:4},{value:"Log",id:"log",level:2},{value:"Week 1: Planning and Hardware Acquisition",id:"week-1-planning-and-hardware-acquisition",level:3},{value:"Week 2: Basic Tests and Soldering",id:"week-2-basic-tests-and-soldering",level:3},{value:"Week 3: Real-Time Implementation and Polyphony",id:"week-3-real-time-implementation-and-polyphony",level:3},{value:"Hardware",id:"hardware",level:2},{value:"3.1 Critical Components",id:"31-critical-components",level:3},{value:"3.2 Logical Interconnection Diagram",id:"32-logical-interconnection-diagram",level:3},{value:"3.3 Detailed Electronic Schematic (KiCad)",id:"33-detailed-electronic-schematic-kicad",level:3},{value:"3.4 Prototyping and Wiring",id:"34-prototyping-and-wiring",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"5.1 Detailed Software Architecture",id:"51-detailed-software-architecture",level:3},{value:"5.2 Shared Data Structure (Safety in Rust)",id:"52-shared-data-structure-safety-in-rust",level:3},{value:"5.3 Functional Diagram (Data Flow)",id:"53-functional-diagram-data-flow",level:3},{value:"Links",id:"links",level:2}];function h(e){const t={a:"a",admonition:"admonition",annotation:"annotation",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",ol:"ol",p:"p",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"polyphonic-keyboard-synthesizer",children:"Polyphonic Keyboard Synthesizer"})}),"\n",(0,n.jsx)(t.h3,{id:"embedded-rust-on-stm32",children:"Embedded Rust on STM32"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Project Documentation & Implementation Plan"})}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Author"}),": Delia Udrea ",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.strong,{children:"GitHub Project Link"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/UPB-PMRust-Students/project-dm-2025-DeliaUdrea",children:"https://github.com/UPB-PMRust-Students/project-dm-2025-DeliaUdrea"})]})}),"\n",(0,n.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(t.p,{children:["This project aims to develop a fully functional digital musical instrument capable of rendering ",(0,n.jsx)(t.strong,{children:"polyphony"})," (chords) and responding in ",(0,n.jsx)(t.strong,{children:"real-time"})," to user interactions (keys, sustain pedal, pitch bend)."]}),"\n",(0,n.jsxs)(t.p,{children:["The core of the system is an ",(0,n.jsx)(t.strong,{children:"STM32 Nucleo"})," microcontroller, programmed in the ",(0,n.jsx)(t.strong,{children:"Rust"})," language (using a Real-Time framework) to guarantee minimal audio latency and high reliability."]}),"\n",(0,n.jsx)(t.h3,{id:"functionality",children:"Functionality"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Polyphonic Input:"})," Reading approximately 61 keys (organized in an ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mi,{children:"R"}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mi,{children:"C"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"R \\times C"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})]})]})," matrix) with anti-ghosting protection (diode per switch)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio Synthesis:"})," Digital generation of sound waves (sine/square) on the microcontroller, utilizing the DAC or PWM peripheral."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Expressive Control:"})," Implementation of the ",(0,n.jsx)(t.em,{children:"Sustain"})," function (pedal) and ",(0,n.jsx)(t.em,{children:"Pitch Bend"})," control (joystick)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio Output:"})," Amplifying the weak digital signal from the MCU to drive an external speaker."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,n.jsx)(t.h3,{id:"21-project-motivation",children:"2.1 Project Motivation"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Technical Challenge:"})," The project combines electronics (key matrix, audio filtering) with real-time programming, serving as an excellent demonstration of Rust capabilities in the ",(0,n.jsx)(t.code,{children:"no_std"})," (embedded systems) environment."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Experience Quality:"})," The choice of high-quality mechanical switches (Outemu Linear, 65g) over simple buttons offers a superior feel suitable for a musical instrument."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Practical Application:"})," Creating a functional digital instrument capable of playing complete songs."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"22-swot-analysis",children:"2.2 SWOT Analysis"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Strengths"})}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Weaknesses"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"High Performance:"})," Rust ",(0,n.jsx)(t.code,{children:"no_std"})," ensures minimal latency for real-time audio."]}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Complexity:"})," Manually wiring a 61-key matrix is labor-intensive and error-prone."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Durability:"})," Mechanical switches provide a robust and long-lasting interface."]}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Audio Quality:"})," PWM synthesis is simpler but lower fidelity than a dedicated DAC chip."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Polyphony:"})," Capable of playing multiple notes simultaneously (chords)."]}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Opportunities"})}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Threats"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Scalability:"})," The design can be expanded to include more effects (reverb, echo)."]}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Component Availability:"})," Specific switches or STM32 boards may be out of stock."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Educational:"})," Deep dive into embedded systems, digital signal processing, and Rust."]}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,n.jsx)(t.strong,{children:"Timing constraints:"})," Real-time audio requires strict timing; missed deadlines cause glitches."]})]})]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"System Architecture",src:s(16175).A+"",width:"1024",height:"768"})}),"\n",(0,n.jsx)(t.h3,{id:"21-hardware-architecture",children:"2.1 Hardware Architecture"}),"\n",(0,n.jsx)(t.p,{children:"The system is divided into three main interconnected blocks:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Input Block (Keyboard):"})," The ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mi,{children:"R"}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mi,{children:"C"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"R \\times C"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})]})]})," matrix of switches and diodes."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control and Logic Block (STM32):"})," Processing input and generating the digital audio signal."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Output Block (Audio):"})," Filtering, amplification, and playback of the sound via the speaker."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Logical Interconnection Diagram:"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Logical Interconnection Diagram",src:s(3458).A+"",width:"1024",height:"768"})}),"\n",(0,n.jsx)(t.h3,{id:"22-software-architecture",children:"2.2 Software Architecture"}),"\n",(0,n.jsxs)(t.p,{children:["The software is built using ",(0,n.jsx)(t.strong,{children:"Rust"})," and the ",(0,n.jsx)(t.strong,{children:"RTIC"})," (Real-Time Interrupt-driven Concurrency) framework to manage the strict timing requirements of audio synthesis. The architecture binds strictly to the hardware peripherals to ensure zero-latency performance."]}),"\n",(0,n.jsx)(t.h4,{id:"concurrency--priority-model",children:"Concurrency & Priority Model"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio Task (Priority 2 - Critical):"}),' This is the "heartbeat" of the synthesizer. It is triggered by a hardware timer (e.g., TIM2) at exactly ',(0,n.jsx)(t.strong,{children:"44.1 kHz"}),". Its sole responsibility is to calculate the next sample value and write it to the DAC/PWM output. It ",(0,n.jsx)(t.em,{children:"preempts"})," any lower priority tasks to ensure no audio glitches occur."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Logic Task (Priority 1):"})," Triggered by software (Software Interrupt) whenever a key state changes. It handles the musical logic: converting key indices to MIDI notes, calculating frequencies using lookup tables (LUT), and processing Envelope (ADSR) states."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"I/O Task (Priority 0):"})," A periodic scheduled task (approx. every 5ms). It handles the physical interface (Matrix Scanning and ADC polling)."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"hardware-binding",children:"Hardware Binding"}),"\n",(0,n.jsxs)(t.p,{children:["The software interacts directly with the STM32F4 peripherals via the ",(0,n.jsx)(t.code,{children:"stm32f4xx-hal"})," crate:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"GPIO (Key Matrix):"})," The Key Scan algorithm dynamically reconfigures GPIO pins. It drives one ",(0,n.jsx)(t.strong,{children:"Row pin High"})," (Logic 1) and reads the ",(0,n.jsx)(t.strong,{children:"Column pins"}),". If a Column reads High, the switch at that intersection is closed. It iterates through all rows rapidly to detect multiple key presses."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"DAC / PWM (Audio Output):"})," The system uses a hardware Timer to enforce the sample rate.","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"PWM Mode:"})," The timer controls the duty cycle of a high-frequency square wave (e.g., >200 kHz) to approximate an analog voltage through the RC filter."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"DAC Mode:"})," The calculated digital sample (12-bit) is written directly to the DAC Data Holding Register (DHR), which converts it to voltage."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"ADC (Expressive Control):"})," The Joystick and Pedal are connected to Analog Inputs. The code triggers an ADC conversion sequence and reads the raw 12-bit values (0-4095) to calculate Pitch Bend modulation and Sustain status."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Software Functional Diagram:"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Software Functional Diagram",src:s(42930).A+"",width:"1024",height:"768"})}),"\n",(0,n.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,n.jsx)(t.p,{children:"This log tracks the project's progress, from component acquisition to the implementation of key functionalities."}),"\n",(0,n.jsx)(t.h3,{id:"week-1-planning-and-hardware-acquisition",children:"Week 1: Planning and Hardware Acquisition"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Date"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Status"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Observations"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 1-2"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Finalized BOM"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Final confirmation of components (Outemu, PAM8403, 1N4148)."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 3-5"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Workspace Setup"}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["Installation of Rust toolchain (",(0,n.jsx)(t.code,{children:"cargo-embed"}),", ",(0,n.jsx)(t.code,{children:"probe-rs"}),")."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 6-7"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Hardware Design"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Creation of logic schematic and interconnection diagram."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Status:"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"90% Complete"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Component acquisition is the priority."})})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"week-2-basic-tests-and-soldering",children:"Week 2: Basic Tests and Soldering"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Date"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Status"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Observations"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 8-10"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Matrix Soldering (Ph.1)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Soldering first 20 diodes. Wiring 4x4 test matrix."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 11-12"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"GPIO/Input Test"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Rust code to scan 4x4 matrix and verify anti-ghosting."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 13-14"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Audio Output Test"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Generating fixed frequency tone using DAC/PWM."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Status:"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"30% Complete"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Confirmation of basic input/output functionality."})})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"week-3-real-time-implementation-and-polyphony",children:"Week 3: Real-Time Implementation and Polyphony"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Date"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Status"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Observations"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 15-17"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Audio Task"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Implementing Audio Task at max priority (constant sample rate)."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 18-20"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Polyphonic Synthesis"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Modifying Audio Task for simultaneous notes/chords."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Day 21"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Final Assembly"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Finalizing soldering of all ~61 keys."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Status:"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"70% Complete"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Basic piano functionality is finalized."})})]})]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"hardware",children:"Hardware"}),"\n",(0,n.jsx)(t.h3,{id:"31-critical-components",children:"3.1 Critical Components"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Component"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Specifications"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Role in the Circuit"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Microcontroller"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"STM32 Nucleo (e.g., F401RE)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Processing, Timers, ADC, DAC/PWM."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Switches"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Outemu Linear (3-pin), 65g"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Ensures quality tactile input."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Polyphony Diode"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1N4148"}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:['Prevents "ghosting" in the ',(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mi,{children:"R"}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mi,{children:"C"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"R \\times C"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})]})]})," matrix."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Amplifier"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["PAM8403 Module (",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mn,{children:"2"}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mn,{children:"3"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"2 \\times 3"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(t.span,{className:"mord",children:"2"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(t.span,{className:"mord",children:"3"})]})]})]})," W)"]}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Audio amplification from 3.3V to speaker level."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Matrix Wiring"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Set 5 Spools 24 AWG"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Stable, soldered wiring for the ~70 internal connections."})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"32-logical-interconnection-diagram",children:"3.2 Logical Interconnection Diagram"}),"\n",(0,n.jsx)(t.p,{children:"The hardware blocks connect to the STM32 peripherals as follows:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"STM32 Box:"})," Handles GPIO, DAC/PWM, and ADC pins."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Matrix:"})," ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mi,{children:"R"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"R"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"})]})})]})," rows connect to GPIO (Output) and ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mi,{children:"C"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"C"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})})]})," columns connect to GPIO (Input with Pull-up)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio:"})," Connection runs from the DAC/PWM pin, through the RC filter to the input of the PAM8403 module."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Matrix Wiring Illustration",src:s(52924).A+"",width:"1024",height:"768"})}),"\n",(0,n.jsx)(t.h3,{id:"33-detailed-electronic-schematic-kicad",children:"3.3 Detailed Electronic Schematic (KiCad)"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Electronic Schematic",src:s(43773).A+"",width:"1024",height:"768"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Key Matrix:"})," ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mi,{children:"R"}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mi,{children:"C"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"R \\times C"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})]})]})," connection with each diode (1N4148) correctly oriented on each switch."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio Filter:"})," Resistor and capacitor (RC Low-Pass Filter) needed to smooth the PWM signal."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"34-prototyping-and-wiring",children:"3.4 Prototyping and Wiring"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Matrix Construction:"})," Will be built by manually soldering the 24 AWG cable to the output pin of each switch."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Termination:"})," The approx 20 wires from the matrix will be soldered onto the 20-pin IDC Connector."]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,n.jsx)(t.p,{children:"Estimates based on average market rates (RON)."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"No."}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Component"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Specifications"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Qty"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Unit (RON)"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Total"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"HARDWARE"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Microcontroller"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://www.st.com",children:"STM32 Nucleo (F401RE)"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"80.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"80.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"2."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Key Switches"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://example.com",children:"Outemu Linear, 65g"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"70"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1.80"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"126.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"3."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Diode Kit"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1N4148 (20 pcs/kit)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"4"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"12.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"48.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"4."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Audio Amplifier"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"PAM8403 (2 x 3W)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"25.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"25.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"5."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Speaker"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"4 inch, 8 Ohm"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"40.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"40.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"6."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Sustain Button"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Momentary Pushbutton"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"10.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"10.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"PROTOTYPING"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"7."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Protoboard"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Breadboard MB102"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"20.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"20.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"8."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Jumper Wires"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Male-Male"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 set"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"15.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"15.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"9."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Matrix Wire"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"24 AWG Cable"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 set"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"30.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"30.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"10."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Matrix Conn."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"IDC 20 pin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"10.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"10.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"11."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Speaker Cable"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"2 x 0.75 mm^2"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 m"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"5.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"5.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"TOOLS"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"12."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Soldering Kit"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"60W Iron + Stand"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 set"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"125.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"125.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"13."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Resistor Kit"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"600 pcs"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 set"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"45.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"45.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"14."}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Capacitor Kit"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"500 pcs"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1 set"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"50.00"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"50.00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"TOTAL ESTIMATED"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"~ 619"})})]})]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"software",children:"Software"}),"\n",(0,n.jsx)(t.h3,{id:"51-detailed-software-architecture",children:"5.1 Detailed Software Architecture"}),"\n",(0,n.jsxs)(t.p,{children:["The system relies on a concurrent architecture, likely using ",(0,n.jsx)(t.strong,{children:"RTIC"})," or ",(0,n.jsx)(t.strong,{children:"Embassy"})," to ensure real-time responsiveness."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Task"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Function"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Priority"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Audio Gen"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Audio Output"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Max (Critical)"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Runs at ~44 kHz, feeding DAC/PWM. Must not be interrupted."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Key Scan"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Matrix Input"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Medium"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Scans matrix (1-5 ms) to detect key presses."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Control"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Musical Logic"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Medium"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Calculates Hz and Volume, manages Sustain/Pitch Bend."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Idle"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Debugging"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Low"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Sends debugging messages to PC (RTT)."})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"52-shared-data-structure-safety-in-rust",children:"5.2 Shared Data Structure (Safety in Rust)"}),"\n",(0,n.jsxs)(t.p,{children:["To prevent ",(0,n.jsx)(t.em,{children:"data races"}),", all data accessed by both the Audio Task and the I/O Task is protected."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Active Notes:"})," A vector or array (e.g., ",(0,n.jsx)(t.code,{children:"Vec<NoteData>"}),") storing currently active notes."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Protection:"})," Protected by critical sections (RTIC) or channels (Embassy)."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"53-functional-diagram-data-flow",children:"5.3 Functional Diagram (Data Flow)"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Physical Input:"})," Switches, Joystick, Pedal."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Scan Task:"})," Matrix is scanned ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mo,{children:"\u2192"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\rightarrow"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.3669em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"\u2192"})]})})]})," ADC pin is read."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Key Event:"})," NoteOn / NoteOff sent to Musical Logic."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control Logic:"})," Determines Freq/Amp, updates shared structure."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Audio Gen Task:"})," Reads shared structure, calculates wave value."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Output:"})," Digital signal ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mo,{children:"\u2192"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\rightarrow"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.3669em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"\u2192"})]})})]})," Filter ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mo,{children:"\u2192"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\rightarrow"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.3669em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"\u2192"})]})})]})," Amp ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mo,{children:"\u2192"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\rightarrow"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.3669em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"\u2192"})]})})]})," Speaker."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://github.com/embedded-graphics/embedded-graphics",children:"Embedded-Graphics Documentation"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://www.st.com/en/evaluation-tools/stm32-nucleo-boards.html",children:"STM32 Nucleo Datasheet"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://docs.rust-embedded.org/book/",children:"Rust Embedded Book"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://rtic.rs/",children:"RTIC Documentation"})}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},16175:(e,t,s)=>{s.d(t,{A:()=>l});const l=s.p+"assets/images/architecture-b3479c7805ee803cf4e065f36cd29aec.webp"},3458:(e,t,s)=>{s.d(t,{A:()=>l});const l=s.p+"assets/images/diagram_interconnect-92d622bcbceb07df5200c7ef11ee520a.webp"},52924:(e,t,s)=>{s.d(t,{A:()=>l});const l=s.p+"assets/images/matrix_wiring-8d3d7fd05c1515dfea44dc8ea0b886db.webp"},43773:(e,t,s)=>{s.d(t,{A:()=>l});const l=s.p+"assets/images/schematic-8cd524aa2f680f50947860c50bd35d4e.webp"},42930:(e,t,s)=>{s.d(t,{A:()=>l});const l=s.p+"assets/images/software_flow-db74e1a6ab5ced99aa74296b08eacce1.webp"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>a});var l=s(96540);const n={},i=l.createContext(n);function r(e){const t=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),l.createElement(i.Provider,{value:t},e.children)}}}]);