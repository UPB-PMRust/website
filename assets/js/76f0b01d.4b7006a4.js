"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8579],{8548:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"project/2025/eduard.sirbu/index","title":"Piano Player & Learner","description":"A digital piano designed to help users learn and play songs with on-screen note guidance.","source":"@site/versioned_docs/version-fils_en/project/2025/eduard.sirbu/index.md","sourceDirName":"project/2025/eduard.sirbu","slug":"/project/2025/eduard.sirbu/","permalink":"/docs/fils_en/project/2025/eduard.sirbu/","draft":false,"unlisted":false,"editUrl":"https://www.github.com/upb-pmrust/website/edit/main/website/versioned_docs/version-fils_en/project/2025/eduard.sirbu/index.md","tags":[],"version":"fils_en","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Turret with object identification","permalink":"/docs/fils_en/project/2025/eduard.purcarescu/"},"next":{"title":"Infracon","permalink":"/docs/fils_en/project/2025/emanoil_florian_sinisha.popescu/"}}');var s=t(74848),r=t(28453);const d={},o="Piano Player & Learner",l={},c=[{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Inputs",id:"inputs",level:3},{value:"Outputs",id:"outputs",level:3},{value:"Connections",id:"connections",level:3},{value:"Log",id:"log",level:2},{value:"Week 5: 27 October - 2 November",id:"week-5-27-october---2-november",level:3},{value:"Week 6: 3 November - 9 November",id:"week-6-3-november---9-november",level:3},{value:"Week 7: 10 November - 16 November",id:"week-7-10-november---16-november",level:3},{value:"Week 8: 17 November - 23 November",id:"week-8-17-november---23-november",level:3},{value:"Week 9: 24 November - 30 November",id:"week-9-24-november---30-november",level:3},{value:"Week 10: 1 December - 7 December",id:"week-10-1-december---7-december",level:3},{value:"Week 11: 8 December - 14 December",id:"week-11-8-december---14-december",level:3},{value:"Week 12: 15 December - 21 December",id:"week-12-15-december---21-december",level:3},{value:"Hardware",id:"hardware",level:2},{value:"Current pin usage",id:"current-pin-usage",level:3},{value:"Schematics",id:"schematics",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"Detailed Software Design",id:"detailed-software-design",level:2},{value:"Links",id:"links",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"piano-player--learner",children:"Piano Player & Learner"})}),"\n",(0,s.jsx)(n.p,{children:"A digital piano designed to help users learn and play songs with on-screen note guidance."}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Author"}),": Sirbu-Boeti Eduard-Cristian ",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"GitHub Project Link"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/UPB-PMRust-Students/project-dm-2025-Sirbu-Boeti-Eduard",children:"https://github.com/UPB-PMRust-Students/project-dm-2025-Sirbu-Boeti-Eduard"})]})]}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"The project is a 7-note piano intended as a simple learning system to follow the notes of a song. The user can play individual notes or up to two notes simultaneously, allowing for basic chords and harmonies aimed towards beginners. For intermediate learners we will make use of a joystick to experiment with changing the pitch of a note."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["We will use an LCD display to:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Guide the user to follow the displayed notes of a chosen song"}),"\n",(0,s.jsx)(n.li,{children:"Indicate system states (e.g. playing, recording, name of the song to be played etc.)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["The interface is a 4x4 button matrix used for controlling the system:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"1st row: Play more difficult pre-recorded songs"}),"\n",(0,s.jsx)(n.li,{children:"2nd row: Guided play-along mode for easier songs using the display"}),"\n",(0,s.jsx)(n.li,{children:"3rd row: Record and save user-played songs"}),"\n",(0,s.jsx)(n.li,{children:"4th row: Auxiliary actions (start recording, confirm, cancel, etc.)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsxs)(n.p,{children:["The main motiviation behind this project was me wanting to make use of the 4x4 button matrix component. Initially I wanted to make the tabletop game ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Battleship_(game)",children:"Battleship"}),", but I wasn't satisfied with there being only 16 possible square grids due to the size of the button matrix."]}),"\n",(0,s.jsx)(n.p,{children:"After fiddling around with buttons on the breadboard I liked the feel of it and wanted to try doing something with buttons that will fit nicely in your hand. Due to the size of the breadboard I was thinking of maybe using it as a remote controller for something but I ended up going with a small 7-note piano."}),"\n",(0,s.jsx)(n.p,{children:"This was due to the fact that, when I was younger, I used to have a Yamaha digital piano with a lot of similar features and also because I saw that in previous years there have been similar piano projects."}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Arhitecture",src:t(82680).A+"",width:"879",height:"761"})}),"\n",(0,s.jsx)(n.h3,{id:"inputs",children:"Inputs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"7\xd7 Push Buttons"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Act as the main \u201cpiano keys\u201d (Do, Re, Mi, Fa, Sol, La, Si)"}),"\n",(0,s.jsx)(n.li,{children:"Connected as GPIO inputs with pull-ups"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4\xd74 Button Matrix (Keypad)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Used for system control (mode selection, song selection, confirm/cancel actions)"}),"\n",(0,s.jsx)(n.li,{children:"Connected via GPIO row/column scanning"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Analog Joystick"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"VRx and VRy connected to ADC inputs"}),"\n",(0,s.jsx)(n.li,{children:"Used for experimenting with pitch control"}),"\n",(0,s.jsx)(n.li,{children:"The joystick push button (SW) is not used/needed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"outputs",children:"Outputs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"2\xd7 Passive Buzzers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Controlled using PWM"}),"\n",(0,s.jsx)(n.li,{children:'Support up to two simultaneous notes, naming the buzzers as "voices"'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"16\xd72 Character LCD (HD44780 controller chip)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Displays current mode, target notes and system status"}),"\n",(0,s.jsx)(n.li,{children:"Connected via I2C"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"connections",children:"Connections"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GPIO / EXTI"})," \u2013 push buttons (note input)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GPIO scan"})," \u2013 4\xd74 keypad (columns driven, rows read)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ADC"})," \u2013 joystick VRx / VRy"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PWM"})," \u2013 passive buzzers (frequency = note pitch)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"I2C"})," \u2013 LCD module"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"log",children:"Log"}),"\n",(0,s.jsx)(n.h3,{id:"week-5-27-october---2-november",children:"Week 5: 27 October - 2 November"}),"\n",(0,s.jsx)(n.p,{children:'This was the week when we had to present our Powerpoint presentations. In this week, I just gathered the necessary information and created the presentation. There were no additional modifications requested by the professor, as such I took that the project received the "OK".'}),"\n",(0,s.jsx)(n.h3,{id:"week-6-3-november---9-november",children:"Week 6: 3 November - 9 November"}),"\n",(0,s.jsx)(n.p,{children:"This week I set up all 7 buttons on the breadboard and starting building a quick demo to see the overall difficulty. Initially I used a single buzzer, but I also wanted an additional one for concurrent notes. I didn't have an additional passive buzzer (only an active one) so I had to order one."}),"\n",(0,s.jsx)(n.p,{children:"While waiting for the new buzzer, I managed to create the functional demo where i could play the notes through the buzzer."}),"\n",(0,s.jsx)(n.h3,{id:"week-7-10-november---16-november",children:"Week 7: 10 November - 16 November"}),"\n",(0,s.jsx)(n.p,{children:'This week I wanted to connect the I2C display to the MCU. I initially had trouble with the identification of the I2C address, thus not being able to use the display and, as such, I had to wait to complete Lab 06 - "Inter-Intergrated Circuit" to finally be able to scan the correct I2C address and print "Hello World".'}),"\n",(0,s.jsx)(n.p,{children:"Around this time, I also received my second passive buzzer and I finally connected it and was able to play two notes at the same time."}),"\n",(0,s.jsx)(n.p,{children:"Side note: I had to change all the button and the existing buzzer connections because I had to get the two buzzers to connect on different TIMs in order to play different notes at the same time."}),"\n",(0,s.jsx)(n.h3,{id:"week-8-17-november---23-november",children:"Week 8: 17 November - 23 November"}),"\n",(0,s.jsx)(n.p,{children:"At this point, I had all the buttons and buzzers ready and the LCD display was just connected. Now, I wanted to connect the 4x4 button matrix. Here I struggled a lot because there were no markings on the on PCB of the order of the pins and their correspondence with the rows and columns. After finally thinking I got the connections right, I observed that it still wasn't working. I found out the the button matrix that I had simply wasn't detecting the entire rows 1 and 2 (I assume the pins that denoted the rows were broken because the columns had not problems). As such, I postponed this step in order to buy a new button matrix that hopefully works."}),"\n",(0,s.jsx)(n.p,{children:"Side note: At this point, I deconnected for now the existing note buttons for testing as I no longer had space for the 8 pins of the button matrix and had no Female-to-Female connectors for connecting to the Morpho pins."}),"\n",(0,s.jsx)(n.h3,{id:"week-9-24-november---30-november",children:"Week 9: 24 November - 30 November"}),"\n",(0,s.jsx)(n.p,{children:"This week I started testing my joystick to see if it is working properly. I decided that I didn't need to make use of the SW button (clicking the joystick) and that I will either use the X or Y axis for pitch control. After testing it worked properly the ADC and seeing the changes in terminal. At this point I wanted to try testing the pitch change on a static note, but the results were not satisfying, making it sound bad. Hoping to find a solution."}),"\n",(0,s.jsx)(n.h3,{id:"week-10-1-december---7-december",children:"Week 10: 1 December - 7 December"}),"\n",(0,s.jsx)(n.p,{children:'This week I mostly did changes to the code in order to better segment the code for future implementation. Namely, preparing the "Free Play", "Play Along 1 (single notes)" and "Play Along 2 (double notes)" into different functions to be called in the "loop".'}),"\n",(0,s.jsx)(n.h3,{id:"week-11-8-december---14-december",children:"Week 11: 8 December - 14 December"}),"\n",(0,s.jsx)(n.p,{children:"After buying some Female-to-Female cable I was able to complete connection of all components together. I ended up not ordering a new button matrix, thinking that maybe it was my code's fault it wasn't working, but after several more tries I concluded that I need to buy a new button matrix. For now, until I buy the new one, I will have to work on the currently functional rows."}),"\n",(0,s.jsx)(n.h3,{id:"week-12-15-december---21-december",children:"Week 12: 15 December - 21 December"}),"\n",(0,s.jsx)(n.p,{children:"This week I worked on writing the documentation and moving my segmented demos into a single Github repository for the source code. Starting to focus on the source code with all of its features."}),"\n",(0,s.jsx)(n.h2,{id:"hardware",children:"Hardware"}),"\n",(0,s.jsx)(n.p,{children:"I have provided links for reference."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.st.com/en/evaluation-tools/nucleo-u545re-q.html",children:"STM32 NUCLEO-U545RE-Q"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.optimusdigital.ro/ro/audio-buzzere/12247-buzzer-pasiv-de-33v-sau-3v.html",children:"Passive buzzers (\xd72)"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://protosupplies.com/product/tactile-momentary-pushbutton-yellow-12mm/",children:"Push buttons (\xd77)"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://ie.farnell.com/dfrobot/dfr0063/lcd-display-module-i2c-16x2-arduino/dp/3769973",children:"16\xd72 character LCD display"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://protosupplies.com/product/tactile-keypad-4x4-matrix/",children:"4\xd74 button matrix"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.pishop.us/product/analog-2-axis-thumb-joystick-with-select-button/",children:"Analog 2-axis XY joystick"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Connecting components:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Breadboard"}),"\n",(0,s.jsx)(n.li,{children:"Male-to-Male, Male-to-Female, Female-to-Female Cables"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"current-pin-usage",children:"Current pin usage"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LCD (I2C1)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["SCL: ",(0,s.jsx)(n.code,{children:"PB6"})]}),"\n",(0,s.jsxs)(n.li,{children:["SDA: ",(0,s.jsx)(n.code,{children:"PB7"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Buzzers (PWM)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Buzzer 1: ",(0,s.jsx)(n.code,{children:"PC9"})," on ",(0,s.jsx)(n.code,{children:"TIM3_CH4"})]}),"\n",(0,s.jsxs)(n.li,{children:["Buzzer 2: ",(0,s.jsx)(n.code,{children:"PB10"})," on ",(0,s.jsx)(n.code,{children:"TIM2_CH3"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"7 Push Buttons"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PC8"}),", ",(0,s.jsx)(n.code,{children:"PB3"}),", ",(0,s.jsx)(n.code,{children:"PB5"}),", ",(0,s.jsx)(n.code,{children:"PB4"}),", ",(0,s.jsx)(n.code,{children:"PA2"}),", ",(0,s.jsx)(n.code,{children:"PC7"}),", ",(0,s.jsx)(n.code,{children:"PC6"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4\xd74 Button Matrix (Keypad)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Columns 1->4"}),": ",(0,s.jsx)(n.code,{children:"PC13"}),", ",(0,s.jsx)(n.code,{children:"PC12"}),", ",(0,s.jsx)(n.code,{children:"PC11"}),", ",(0,s.jsx)(n.code,{children:"PC10"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rows 1->4"}),": ",(0,s.jsx)(n.code,{children:"PA9"}),", ",(0,s.jsx)(n.code,{children:"PA10"}),", ",(0,s.jsx)(n.code,{children:"PA11"}),", ",(0,s.jsx)(n.code,{children:"PA12"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Joystick"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["VRx / VRy on ",(0,s.jsx)(n.code,{children:"A0"}),", ",(0,s.jsx)(n.code,{children:"A1"})]}),"\n",(0,s.jsx)(n.li,{children:"powered at 3.3 V"}),"\n",(0,s.jsx)(n.li,{children:"Not using the SW(Joystick Click)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"schematics",children:"Schematics"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Hardware",src:t(11758).A+"",width:"918",height:"766"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Schematic",src:t(96999).A+"",width:"1123",height:"794"})}),"\n",(0,s.jsx)(n.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Device"}),(0,s.jsx)(n.th,{children:"Usage"}),(0,s.jsx)(n.th,{children:"Quantity"}),(0,s.jsx)(n.th,{children:"Unit Price"}),(0,s.jsx)(n.th,{children:"Subtotal"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"STM32 NUCLEO-U545RE-Q"}),(0,s.jsx)(n.td,{children:"Main microcontroller board; handles all input processing, sound generation and display control"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"~100 RON"}),(0,s.jsx)(n.td,{children:"~100.00 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Passive buzzer 3V"}),(0,s.jsx)(n.td,{children:"Audio output for generating musical notes via PWM"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"0.99 RON"}),(0,s.jsx)(n.td,{children:"1.98 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Yellow push button"}),(0,s.jsx)(n.td,{children:"Piano key inputs (Do\u2013Si)"}),(0,s.jsx)(n.td,{children:"7"}),(0,s.jsx)(n.td,{children:"1.99 RON"}),(0,s.jsx)(n.td,{children:"13.93 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"4\xd74 Button Matrix Keypad"}),(0,s.jsx)(n.td,{children:"Menu navigation, mode selection and control input"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"3.99 RON"}),(0,s.jsx)(n.td,{children:"3.99 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LCD 16\xd72 with I2C interface"}),(0,s.jsx)(n.td,{children:"Displays current mode, notes and system feedback"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"14.99 RON"}),(0,s.jsx)(n.td,{children:"14.99 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Analog 2-axis joystick module"}),(0,s.jsx)(n.td,{children:"Experimental pitch / expression control via ADC"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"5.35 RON"}),(0,s.jsx)(n.td,{children:"5.35 RON"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Breadboard"}),(0,s.jsx)(n.td,{children:"Prototyping platform for wiring components"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"\u2014"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Jumper wires (M-M, M-F, F-F)"}),(0,s.jsx)(n.td,{children:"Electrical connections between components"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"\u2014"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Total hardware cost: ~140 RON"})}),"\n",(0,s.jsx)(n.h2,{id:"software",children:"Software"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Library"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Usage"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/embassy-rs/embassy/tree/main/embassy-stm32",children:"embassy-stm32"})}),(0,s.jsx)(n.td,{children:"Hardware Abstraction Layer (HAL) for STM32 in Embassy"}),(0,s.jsx)(n.td,{children:"GPIO (buttons + matrix scan), ADC (joystick), PWM timers (buzzers), I2C (LCD)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/embassy-rs/embassy/tree/main/embassy-executor",children:"embassy-executor"})}),(0,s.jsx)(n.td,{children:"Async task executor for embedded Rust"}),(0,s.jsxs)(n.td,{children:["runs the async ",(0,s.jsx)(n.code,{children:"#[embassy_executor::main]"})," entry point and the main event loop"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/embassy-rs/embassy/tree/main/embassy-time",children:"embassy-time"})}),(0,s.jsx)(n.td,{children:"Async timers and delays"}),(0,s.jsxs)(n.td,{children:["scan timing for matrix, debounce-ish delays, periodic loop pacing (",(0,s.jsx)(n.code,{children:"Timer::after_*"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/knurling-rs/defmt",children:"defmt"})}),(0,s.jsx)(n.td,{children:"Lightweight embedded logging framework"}),(0,s.jsx)(n.td,{children:"structured logs for button/keypad events, ADC debug, state transitions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/knurling-rs/defmt/tree/main/defmt-rtt",children:"defmt-rtt"})}),(0,s.jsx)(n.td,{children:"RTT (Real-Time Transfer) transport for defmt logs"}),(0,s.jsx)(n.td,{children:"sends logs to the host while debugging (no UART required)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/knurling-rs/probe-run/tree/main/crates/panic-probe",children:"panic-probe"})}),(0,s.jsx)(n.td,{children:"Panic handler for embedded targets"}),(0,s.jsx)(n.td,{children:"reports panics through the debug probe/RTT"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://github.com/rust-embedded/embedded-hal",children:"embedded-hal"})}),(0,s.jsx)(n.td,{children:"Traits for embedded drivers (portable interfaces)"}),(0,s.jsx)(n.td,{children:"used for I2C traits and PWM trait bounds"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"detailed-software-design",children:"Detailed Software Design"}),"\n",(0,s.jsx)(n.p,{children:"The firmware is implemented as a single asynchronous control loop using the Embassy framework. All application logic is centralized in the main loop, with functionality divided into clearly defined stages."}),"\n",(0,s.jsx)(n.p,{children:"The system is divided into:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Initializing the components","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"LCD: Finding the I2C address, passing the value to the constants"}),"\n",(0,s.jsx)(n.li,{children:"Joystick: Calibrating the center of the joystick"}),"\n",(0,s.jsx)(n.li,{children:'Buzzers: Creating the "voices" that will handle the notes'}),"\n",(0,s.jsx)(n.li,{children:"Hardcoding the frequencies"}),"\n",(0,s.jsx)(n.li,{children:"Attributing different functions for each of the buttons on the matrix"}),"\n",(0,s.jsx)(n.li,{children:"Defining different modes (FreePlay, SinglePlay, DoublePlay)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Main loop","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Default: FreePlay Mode"}),"\n",(0,s.jsxs)(n.li,{children:["Await button presses that trigger changes to a different mode","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Intermediary steps e.g. confirmation etc."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Async functions","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"These will be called when the main loop will switch control"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Software",src:t(90007).A+"",width:"999",height:"403"})}),"\n",(0,s.jsx)(n.h2,{id:"links",children:"Links"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://embedded-rust-101.wyliodrin.com/docs/fils_en/project/2025/remus.bercut",children:"Pico Piano"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://embedded-rust-101.wyliodrin.com/docs/fils_en/project/2025/vlad.preda2503",children:"Electric Piano"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},11758:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Hardware-a5442e308eea0ccdb2666178a9569ec5.webp"},96999:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/RustPiano-5c1b6294af244aa5dd6b95fb8b306195.svg"},90007:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/Software-57d2c14a9e4a26851965604757ff5086.webp"},82680:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/arhitecture-9d57f3f03c78eb08dd8f8ac7cb11c65b.webp"},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);