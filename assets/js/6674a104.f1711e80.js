"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4584],{64647:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"project/2025/andrei_ioan.timofte/index","title":"Bluetooth Distance Tracker","description":"A Bluetooth based system that estimates how far your phone is and makes a sound if it goes too far away.","source":"@site/versioned_docs/version-acs_cc/project/2025/andrei_ioan.timofte/index.md","sourceDirName":"project/2025/andrei_ioan.timofte","slug":"/project/2025/andrei_ioan.timofte/","permalink":"/docs/acs_cc/project/2025/andrei_ioan.timofte/","draft":false,"unlisted":false,"editUrl":"https://www.github.com/upb-pmrust/website/edit/main/website/versioned_docs/version-acs_cc/project/2025/andrei_ioan.timofte/index.md","tags":[],"version":"acs_cc","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Water Level Monitoring System","permalink":"/docs/acs_cc/project/2025/andrei_daniel.calu/"},"next":{"title":"Simon Says Game","permalink":"/docs/acs_cc/project/2025/andreia.toaca/"}}');var r=s(74848),n=s(28453);const d={},a="Bluetooth Distance Tracker",o={},c=[{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Log",id:"log",level:2},{value:"Week 5 - 11 May",id:"week-5---11-may",level:3},{value:"Week 12 - 18 May",id:"week-12---18-may",level:3},{value:"Week 19 - 25 May",id:"week-19---25-may",level:3},{value:"Hardware",id:"hardware",level:2},{value:"Schematics",id:"schematics",level:3},{value:"Images",id:"images",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"Links",id:"links",level:2}];function l(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"bluetooth-distance-tracker",children:"Bluetooth Distance Tracker"})}),"\n",(0,r.jsx)(t.p,{children:"A Bluetooth based system that estimates how far your phone is and makes a sound if it goes too far away."}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsx)(t.mdxAdmonitionTitle,{}),(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Author"}),": Timofte Andrei-Ioan ",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.strong,{children:"GitHub Project Link"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/UPB-PMRust-Students/proiect-Andrei1223",children:"Github"})]})]}),"\n",(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(t.p,{children:"This is a device that continuously measures, in real time, the distance between a Raspberry\u202fPi Pico and a specific device that has Bluetooth.\nIt scans only for whitelisted devices identified by a predefined unique identifier, reads the RSSI(Received Signal Strength Indicator) to estimate the distance, and shows the value on a small TFT LCD.\nWith three onboard buttons, the user can set a custom distance limit. If the tracked device moves beyond that limit, the system makes a sound using a passive buzzer.\nSuch a tool is useful for keeping personal belongings nearby or simplifying indoor localization."}),"\n",(0,r.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsx)(t.p,{children:"The motivation is my passion and curiosity about what Bluetooth Low Energy can achieve drove me to explore distance estimation based on RSSI."}),"\n",(0,r.jsx)(t.p,{children:"I want to:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"understand the practical limits of RSSI-based ranging"}),"\n",(0,r.jsx)(t.li,{children:"design a self-contained tracker and to learn Rust's embedded ecosystem while building something genuinely useful for everyday life"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Diagram",src:s(88601).A+""})}),"\n",(0,r.jsx)(t.p,{children:"The system is composed of these main components:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"1. Raspberry\u202fPi\u202fPico\u202f2W"})}),"\n",(0,r.jsx)(t.p,{children:"It does most of the computing and scanning for Bluetooth devices.\nEmbassy's async executor multiplexes three tasks: scanning, UI and alerts. The RP2350's second core is unused."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"2. BLE Scanner"})}),"\n",(0,r.jsx)(t.p,{children:"Filters advertisements to a single device ID and retrieves its RSSI once per scan.\nIt is a software task that runs the CYW43439 modem as an observer and does:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"periodically issues scan requests(every 500\u202fms)"}),"\n",(0,r.jsx)(t.li,{children:"maintains a list of devices(target MAC or UUID) and discards all other advertisements"}),"\n",(0,r.jsx)(t.li,{children:"for each accepted packet, timestamps and stores raw RSSI in a buffer"}),"\n",(0,r.jsx)(t.li,{children:"publishes the buffered RSSI samples to the Distance Estimator over an async channel"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"3. Distance Estimator"})}),"\n",(0,r.jsx)(t.p,{children:"Converts the RSSI stream into a single, smoothed distance value:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["at first boot the user will record ",(0,r.jsx)(t.code,{children:"RSSI0"})," at a known distance ",(0,r.jsx)(t.code,{children:"d0\xa0=\xa01\u202fm"})]}),"\n",(0,r.jsxs)(t.li,{children:["uses the log-distance equation ",(0,r.jsx)(t.code,{children:"d = 10^((RSSI0\xa0\u2212\xa0RSSI)\u202f/\u202f(10\xa0x\xa0n))"}),", where n is the environment-specific path-loss exponent (default 1.8 indoors)"]}),"\n",(0,r.jsx)(t.li,{children:"a constant velocity Kalman smoother removes fast fades and outputs the distance every 250\u202fms"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"4. Buttons"})}),"\n",(0,r.jsx)(t.p,{children:"Three tactile buttons used by the user to control the sound and threshold distance. The buttons are used to\ncontrol the menu that is displayed onto the LCD screen."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"5. Display Driver"})}),"\n",(0,r.jsxs)(t.p,{children:['SPI driver for an ST7735 1.8" TFT using the ',(0,r.jsx)(t.code,{children:"st7789"})," crate."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Shows a numeric distance (in metres with one decimal) for the current device."}),"\n",(0,r.jsx)(t.li,{children:"Shows a bar for the current sound level."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"6. Alert Handler"})}),"\n",(0,r.jsx)(t.p,{children:"Generates a PWM sound on a passive buzzer whenever the measured distance\u202fis greater than the\u202flimit."}),"\n",(0,r.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,r.jsx)(t.h3,{id:"week-5---11-may",children:"Week 5 - 11 May"}),"\n",(0,r.jsx)(t.p,{children:"Setting up the framework to run a Raspberry Pi Pico 2W with another MCU as the debugger. Researching for methods to communicate with another device via BLE in Embassy. Acquired all the components needed for this project."}),"\n",(0,r.jsx)(t.h3,{id:"week-12---18-may",children:"Week 12 - 18 May"}),"\n",(0,r.jsx)(t.p,{children:"Connected all the components and tested that the buttons can controll the passive buzzer. Also connected the LCD and started working on the menu options and wrote the software in order to controll the buzzer and the LCD. Started working on the software to receive Bluetooth signals."}),"\n",(0,r.jsx)(t.h3,{id:"week-19---25-may",children:"Week 19 - 25 May"}),"\n",(0,r.jsx)(t.p,{children:"Added all the necessary code to make the menu work correctly but and created more tasks for the Bluetooth RSSI measure. When trying to integrate the trouble_host crate into my project, I faced some problems regarding the compatibility. This is because the various crates used in my project used different versions of bt_hci crate. And so I decided to use a Bluetooth module as a last resort."}),"\n",(0,r.jsx)(t.h2,{id:"hardware",children:"Hardware"}),"\n",(0,r.jsx)(t.p,{children:"The tracker is minimalist and everything fits on a breadboard and runs from a single Micro USB supply.\nThe only active electronics are:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"the Raspberry\u202fPi\u202fPico\u202f2W which brings the RP2350 MCU"}),"\n",(0,r.jsx)(t.li,{children:'the CYW43439 Wi-Fi/BLE modem and a 1.8" SPI TFT for the user interface'}),"\n",(0,r.jsx)(t.li,{children:"three tactile buttons that let you control the menu"}),"\n",(0,r.jsx)(t.li,{children:"a passive buzzer that provides the sound alert"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Aside from wires, resistors, diodes and transistors, no additional sensors or wireless modules are required.  Distance estimation relies solely on the RSSI that the on-board BLE modem already outputs."}),"\n",(0,r.jsx)(t.h3,{id:"schematics",children:"Schematics"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Diagram",src:s(81838).A+"",width:"1024",height:"724"})}),"\n",(0,r.jsx)(t.h3,{id:"images",children:"Images"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Diagram",src:s(33883).A+"",width:"1024",height:"768"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Diagram",src:s(95951).A+"",width:"1024",height:"768"})}),"\n",(0,r.jsx)(t.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Device"}),(0,r.jsx)(t.th,{children:"Usage"}),(0,r.jsx)(t.th,{children:"Price"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.raspberrypi.com/documentation/microcontrollers/raspberry-pi-pico.html",children:"Raspberry Pi Pico 2W"})}),(0,r.jsx)(t.td,{children:"The microcontroller"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/en/raspberry-pi-boards/12394-raspberry-pi-pico-w.html",children:"2x35 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.displayfuture.com/Display/datasheet/controller/ST7735.pdf",children:'Display TFT LCD 1.8"'})}),(0,r.jsx)(t.td,{children:"To display the map and menu"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.emag.ro/display-tft-lcd-1-8-inch-128x160-spi-st7735s-arduino-emg204/pd/D8RPFSYBM/",children:"34 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://components101.com/sites/default/files/component_datasheet/Buzzer%20Datasheet.pdf",children:"Passive Buzzer"})}),(0,r.jsx)(t.td,{children:"For emitting sounds"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/audio-buzzere/634-buzzer-pasiv-de-5-v.html?search_query=buzzer+pasiv&results=15",children:"2 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://media.digikey.com/pdf/Data%20Sheets/Digi-Key%20PDFs/Jumper_Wire_Kits.pdf",children:"10 Male to male wires"})}),(0,r.jsx)(t.td,{children:"Wires"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/fire-fire-mufate/884-set-fire-tata-tata-40p-10-cm.html?search_query=Fire+Colorate+Tata-Tata+%2840p%2C+10+cm%29&results=10",children:"2x5 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Buttons"}),(0,r.jsx)(t.td,{children:"For user input"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/en/buttons-and-switches/1119-6x6x6-push-button.html?search_query=buttons&results=258",children:"3x0.36 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Resistors, transistors"}),(0,r.jsx)(t.td,{children:"For connecting the components"}),(0,r.jsx)(t.td,{children:"2 RON"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"software",children:"Software"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Library"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Usage"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://github.com/almindor/st7789",children:"st7789"})}),(0,r.jsx)(t.td,{children:"Display driver for ST7789"}),(0,r.jsx)(t.td,{children:"Used for the display for the Pico Explorer Base"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.rs/embedded-hal/latest/embedded_hal/",children:"embadded-hal"})}),(0,r.jsx)(t.td,{children:"Hardware Abstraction Layer"}),(0,r.jsx)(t.td,{children:"Used to control the SPI and GPIO"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.rs/rp2040-hal/latest/rp2040_hal/pwm/index.html",children:"pwm"})}),(0,r.jsx)(t.td,{children:"Pulse width modulation"}),(0,r.jsx)(t.td,{children:"For controlling the passive buzzer"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.embassy.dev/embassy-rp/git/rp2040/index.html",children:"embassy-rp"})}),(0,r.jsx)(t.td,{children:"RP2350 support crates"}),(0,r.jsx)(t.td,{children:"Used for initializing and interacting with peripherals"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://github.com/embedded-graphics/embedded-graphics",children:"embedded-graphics"})}),(0,r.jsx)(t.td,{children:"2D graphics library"}),(0,r.jsx)(t.td,{children:"Used for drawing to the display"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://crates.io/crates/cyw43",children:"cyw43"})}),(0,r.jsx)(t.td,{children:"Bluetooth/WiFi library"}),(0,r.jsx)(t.td,{children:"Used to activate the CYW43439 chip"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.embassy.dev/trouble-host/git/default/index.html",children:"trouble_host"})}),(0,r.jsx)(t.td,{children:"BLE Host"}),(0,r.jsx)(t.td,{children:"Used for creating a host and receiving BLE signals"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://crates.io/crates/embedded-kalman",children:"embedded-kalman"})}),(0,r.jsx)(t.td,{children:"Kalman filtering"}),(0,r.jsx)(t.td,{children:"Used for smoothing RSSI before distance computing"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://pmrust.pages.upb.ro/docs/acs_cc/lab/07#wi-fi-in-embassy",children:"CYW43439 Wifi/BLE"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://pmrust.pages.upb.ro/docs/acs_cc/lab/05#screen",children:"SPI with screen"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://pmrust.pages.upb.ro/docs/acs_cc/lab/02",children:"GPIO"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},88601:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/components_diagram-80498b131e7534693658d8137546d402.svg"},33883:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/first_image-1fe156711954fda7ab495dbe08658340.webp"},81838:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/schematic-375d4376f61e329d00c5fe56f775cb4b.svg"},95951:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/second_image-71c124bdd6b4b7febf3807603ea15e36.webp"},28453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>a});var i=s(96540);const r={},n=i.createContext(r);function d(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);